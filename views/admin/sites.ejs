<%- include('../partials/head') %>
    <%- include('../partials/sidebar') %>

        <div class="page-header">
            <h1>๊ฐ์ ์ฌ์ดํธ ๊ด๋ฆฌ</h1>
            <p>์ฐ๋ํ ๊ฐ์ ์ฌ์ดํธ๋ฅผ ๋ฑ๋กํฉ๋๋ค</p>
        </div>

        <div class="card mb-2">
            <div class="card-header">
                <span class="card-title">โ ์ ๊ฐ์ ์ฌ์ดํธ ๋ฑ๋ก</span>
            </div>
            <form method="POST" action="/admin/sites">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">์ฌ๋ฌ๊ทธ (์๋ฌธ, ํ์ดํ ๊ฐ๋ฅ)</label>
                        <input type="text" name="slug" class="form-input" placeholder="์: fpga-lect" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">์ฌ์ดํธ ์ด๋ฆ</label>
                        <input type="text" name="name" class="form-input" placeholder="์: FPGA ์ค๊ณ ์ค์ต" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">URL</label>
                    <input type="url" name="url" class="form-input" placeholder="์: http://localhost:5174" required>
                </div>
                <div class="form-group">
                    <label class="form-label">์ค๋ช</label>
                    <textarea name="description" class="form-input" placeholder="๊ฐ์ ์ฌ์ดํธ ์ค๋ช"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">๋ฑ๋ก</button>
            </form>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">๐ ๋ฑ๋ก๋ ์ฌ์ดํธ (<%= sites.length %>)</span>
            </div>
            <% if (sites.length===0) { %>
                <div class="empty-state">
                    <div class="empty-icon">๐</div>
                    <h3>๋ฑ๋ก๋ ์ฌ์ดํธ๊ฐ ์์ต๋๋ค</h3>
                </div>
                <% } else { %>
                    <div class="table-wrap">
                        <table>
                            <thead>
                                <tr>
                                    <th>์ฌ๋ฌ๊ทธ</th>
                                    <th>์ด๋ฆ</th>
                                    <th>URL</th>
                                    <th>์ค๋ช</th>
                                    <th>๊ด๋ฆฌ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% sites.forEach(s=> { %>
                                    <tr>
                                        <td><code><%= s.slug %></code></td>
                                        <td><strong>
                                                <%= s.name %>
                                            </strong></td>
                                        <td class="text-sm">
                                            <%= s.url %>
                                        </td>
                                        <td class="text-sm text-muted">
                                            <%= s.description || '-' %>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <a href="/admin/sites/<%= s.id %>/edit" class="btn btn-outline btn-sm"
                                                    title="์์">โ๏ธ</a>
                                                <form method="POST" action="/admin/sites/<%= s.id %>/delete"
                                                    style="display:inline;" onsubmit="return confirm('์๋ง ์ญ์ํ์๊ฒ์ต๋๊น?')">
                                                    <button type="submit" class="btn btn-danger btn-sm"
                                                        title="์ญ์">๐๏ธ</button>
                                                </form>
                                            </div>
                                        </td>
                                    </tr>
                                    <% }); %>
                            </tbody>
                        </table>
                    </div>
                    <% } %>
        </div>

        <%- include('../partials/footer') %>