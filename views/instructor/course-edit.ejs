<%- include('../partials/head') %>
    <%- include('../partials/sidebar') %>

        <div class="page-header">
            <h1>강의 수정</h1>
            <p>강의 정보를 수정하고 연결된 사이트 및 PDF 자료를 관리합니다.</p>
        </div>

        <div class="card" style="max-width:600px;">
            <% if (error) { %>
                <div class="alert alert-error">⚠️ <%= error %>
                </div>
                <% } %>

                    <form method="POST" action="/instructor/courses/<%= course.id %>/edit">
                        <div class="form-group">
                            <label class="form-label">강의명 *</label>
                            <input type="text" name="title" class="form-input" value="<%= course.title %>" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">강의 설명</label>
                            <textarea name="description" class="form-input"><%= course.description || '' %></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">🔗 강의 사이트 선택</label>
                            <div class="checkbox-group">
                                <% sites.forEach(s=> { %>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="site_ids" value="<%= s.id %>"
                                            <%=linkedSiteIds.includes(s.id) ? 'checked' : '' %>>
                                        <span>
                                            <%= s.name %> <small class="text-muted">(<%= s.slug %>)</small>
                                        </span>
                                    </label>
                                    <% }); %>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">📑 PDF 강의 자료 선택</label>
                            <div class="checkbox-group">
                                <% materials.forEach(m=> { %>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="material_ids" value="<%= m.id %>"
                                            <%=linkedMaterialIds.includes(m.id) ? 'checked' : '' %>>
                                        <span>
                                            <%= m.title %>
                                        </span>
                                    </label>
                                    <% }); %>
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <button type="submit" class="btn btn-primary">저장</button>
                            <a href="/instructor" class="btn btn-outline">취소</a>
                        </div>
                    </form>
        </div>

        <%- include('../partials/footer') %>